<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CSS Styling & Layout - WebVantage</title>
  <link rel="stylesheet" href="navigation.css">
  <style>
    /* Same theme as other lessons */
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height:1.6;color:#fff;background:#000;min-height:100vh;overflow-x:hidden;position:relative}
    body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:-1; background:linear-gradient(to bottom right, rgba(255,140,0,.03), transparent 70%)}

    .header{background:rgba(0,0,0,.97);padding:1.25rem 0;position:fixed;top:0;left:0;right:0;z-index:1000}
    .header::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:1px; background:linear-gradient(to right,transparent,rgba(255,140,0,.2),rgba(255,140,0,.4),rgba(255,140,0,.2),transparent)}
    .nav-container{max-width:1600px;margin:0 auto;padding:0 3rem;display:grid;grid-template-columns:auto 1fr auto;gap:3rem;align-items:center}
    .logo{font-size:1.25rem;font-weight:500;color:#fff;text-decoration:none;display:flex;align-items:center;gap:.8rem;letter-spacing:.5px;transition:.3s}
    .logo:hover{transform:scale(1.05);text-shadow:0 0 20px rgba(255,140,0,.5)}
    .logo::before{content:"";width:24px;height:24px;background:linear-gradient(135deg,#ff8c00,#ffb347); mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.8L19.5 8 12 11.2 4.5 8 12 4.8zM4 16.5v-7l7 3.5v7l-7-3.5zm9 3.5v-7l7-3.5v7l-7 3.5z'/%3E%3C/svg%3E") no-repeat center/contain}
    .nav-menu{display:flex;list-style:none;gap:2.5rem;justify-content:center}
    .nav-link{color:rgba(255,255,255,.7);text-decoration:none;font-weight:400;padding:.5rem 1rem;position:relative;font-size:.95rem;letter-spacing:.3px;transition:.3s}
    .nav-link::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:1px;background:#ff8c00;transform:scaleX(0);transform-origin:right;transition:transform .3s}
    .nav-link:hover{color:#fff}.nav-link:hover::after{transform:scaleX(1);transform-origin:left}
    .nav-link.active{color:#ff8c00;font-weight:500}.nav-link.active::after{transform:scaleX(1)}

    .user-menu{display:none}.user-menu.show{display:block}
    .user-profile-container{display:flex;align-items:center;gap:.75rem}
    .user-avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#ff8c00,#ffb347);display:flex;align-items:center;justify-content:center;color:#000;font-weight:700;overflow:hidden;cursor:pointer;transition:.3s}
    .user-avatar:hover{transform:scale(1.1);box-shadow:0 0 15px rgba(255,140,0,.5)}
    .user-avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%}
    .elo-progress-container{display:flex;flex-direction:column;align-items:flex-start;gap:.3rem}
    .elo-rank-header{display:flex;align-items:center;gap:.5rem}
    .elo-rank-icon{width:16px;height:16px;border-radius:3px}
    .elo-rank-text{font-size:.75rem;font-weight:600}
    .elo-progress-bar{width:80px;height:6px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden}
    .elo-progress-fill{height:100%;border-radius:3px;transition:.5s}
    .elo-current-rating{font-size:.7rem;color:rgba(255,255,255,.6);font-weight:500}
    .rank-beginner{background:linear-gradient(135deg,#4CAF50,#66BB6A)}
    .rank-intermediate{background:linear-gradient(135deg,#FF9800,#FFB74D)}
    .rank-advanced{background:linear-gradient(135deg,#F44336,#EF5350)}
    .rank-expert{background:linear-gradient(135deg,#9C27B0,#BA68C8)}

    .main-container{max-width:1200px;margin:0 auto;padding:2rem;padding-top:120px}
    .back-button{background:rgba(40,40,40,.8);color:#fff;text-decoration:none;padding:1rem 2rem;border-radius:25px;font-weight:600;border:1px solid rgba(255,140,0,.3);display:inline-block;margin-bottom:2rem}
    .back-button:hover{background:rgba(255,140,0,.1);border-color:#ff8c00}

    .lesson-header{text-align:center;margin-bottom:2rem;padding:2rem 1.5rem;background:linear-gradient(135deg,rgba(15,15,15,.9),rgba(30,30,30,.9));border-radius:20px;border:1px solid rgba(255,140,0,.2)}
    .lesson-title{font-size:2.4rem;color:#ff8c00;margin-bottom:.5rem;font-weight:700}
    .lesson-subtitle{font-size:1.05rem;color:#ccc;margin-bottom:1rem}

    .view-switch{display:flex;gap:.75rem;justify-content:center;margin:1rem auto 2rem;flex-wrap:wrap}
    .view-tab{background:rgba(40,40,40,.85);border:1px solid rgba(255,140,0,.25);color:#fff;padding:.7rem 1.2rem;border-radius:999px;cursor:pointer;font-weight:600;transition:.25s}
    .view-tab:hover{border-color:#ff8c00;background:rgba(255,140,0,.08)}
    .view-tab.active{background:linear-gradient(135deg,#ff8c00,#ffb347);color:#000;border-color:transparent}

    .progress-bar{width:300px;height:8px;background:rgba(255,255,255,.1);border-radius:4px;margin:.5rem auto 0;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(135deg,#ff8c00,#ffb347);border-radius:4px;width:0%;transition:width .5s}

    .lesson-content{display:grid;gap:2rem;margin-top:1.5rem}
    .topic-card{background:rgba(15,15,15,.95);padding:2rem;border-radius:18px;border:1px solid rgba(255,140,0,.1);transition:.3s;opacity:0;transform:translateY(12px)}
    .topic-card.visible{opacity:1;transform:translateY(0)}
    .topic-card:hover{border-color:rgba(255,140,0,.3);background:rgba(20,20,20,.95)}
    .topic-title{font-size:1.5rem;color:#ff8c00;margin-bottom:1rem;display:flex;align-items:center;gap:.75rem}
    .topic-number{width:36px;height:36px;background:linear-gradient(135deg,#ff8c00,#ffb347);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800}
    .topic-description{color:#ccc;margin-bottom:1.1rem}

    .code-example{background:#111;border:1px solid #333;border-radius:10px;padding:1rem 1.25rem;margin:1rem 0;font-family:'Monaco','Menlo','Ubuntu Mono',monospace;overflow-x:auto}
    .code-example::before{content:'CSS';float:right;color:#ff8c00;font-weight:700;font-size:.8rem}
    .code-example code{white-space:pre;color:#fff}

    .interactive-demo{background:#2a2a2a;border-radius:10px;padding:1rem 1.25rem;margin:.75rem 0;border:2px solid #ff8c00;position:relative}
    .interactive-demo::before{content:'🎨 Live Style Demo';position:absolute;top:-12px;left:1rem;background:#ff8c00;color:#000;padding:.2rem .8rem;border-radius:14px;font-size:.8rem;font-weight:700}

    .try-it-button{background:linear-gradient(135deg,#ff8c00,#ffb347);color:#000;border:none;padding:.8rem 1.2rem;border-radius:22px;font-weight:700;cursor:pointer;transition:.25s;margin-top:.4rem}
    .try-it-button:hover{transform:translateY(-2px);box-shadow:0 8px 18px rgba(255,140,0,.3)}

    #bookModeCSS{display:none}
    .book-wrap{background:rgba(15,15,15,.95);border:1px solid rgba(255,140,0,.2);border-radius:18px;padding:1rem 1rem 1.25rem}
    .book-actions{display:flex;gap:.6rem;justify-content:flex-end;margin-bottom:.6rem}
    .book-link{background:rgba(40,40,40,.85);border:1px solid rgba(255,140,0,.25);color:#fff;padding:.5rem .9rem;border-radius:9px;text-decoration:none;font-weight:600}
    .book-link:hover{border-color:#ff8c00;background:rgba(255,140,0,.08)}
    .book-iframe{width:100%;height:78vh;border:none;border-radius:12px;background:#111}

    .quiz-section{background:linear-gradient(135deg,rgba(20,20,20,.9),rgba(30,30,30,.9));padding:2rem;border-radius:18px;border:2px solid #ff8c00;text-align:center;margin-top:2rem}
    .quiz-options{display:grid;gap:.75rem;max-width:600px;margin:0 auto 1.25rem}
    .quiz-option{background:rgba(40,40,40,.8);border:2px solid rgba(255,140,0,.2);padding:.85rem 1rem;border-radius:10px;color:#fff;cursor:pointer;transition:.2s;text-align:left}
    .quiz-option:hover{border-color:#ff8c00;background:rgba(255,140,0,.1)}
    .quiz-option.selected{border-color:#ff8c00;background:linear-gradient(135deg,rgba(255,140,0,.2),rgba(255,179,71,.1));color:#ff8c00}
    .quiz-option.correct{border-color:#4CAF50;background:rgba(76,175,80,.2);color:#4CAF50}
    .quiz-option.incorrect{border-color:#f44336;background:rgba(244,67,54,.2);color:#f44336}
    .submit-quiz{background:linear-gradient(135deg,#ff8c00,#ffb347);color:#000;border:none;padding:.9rem 1.6rem;border-radius:24px;font-weight:700;cursor:pointer}
    .submit-quiz:disabled{opacity:.6;cursor:not-allowed}
    .quiz-feedback{margin-top:1rem;padding:.7rem;border-radius:10px;font-weight:700;min-height:48px;display:flex;align-items:center;justify-content:center}
    .next-lesson{text-align:center;margin-top:2rem}
    .next-button{background:linear-gradient(135deg,#4CAF50,#66BB6A);color:#fff;text-decoration:none;padding:1.2rem 2rem;border-radius:28px;font-weight:700;display:inline-block}

    @media(max-width:768px){
      .nav-container{flex-direction:column;gap:1rem;padding:0 1rem}
      .nav-menu{flex-wrap:wrap;gap:1rem}
      .main-container{padding:1rem;padding-top:140px}
      .lesson-title{font-size:2rem}
      .topic-card{padding:1.25rem}
      .book-iframe{height:70vh}
    }
  </style>
</head>
<body>
<header class="header">
  <nav class="nav-container">
    <a class="logo" href="index.html">WebVantage</a>
    <ul class="nav-menu">
      <li><a class="nav-link" href="index.html">Home</a></li>
      <li><a class="nav-link" href="team-intro.html">Team</a></li>
      <li><a class="nav-link active" href="courses.html">Courses</a></li>
      <li><a class="nav-link" href="code-editor.html">Code Editor</a></li>
      <li><a class="nav-link" href="challenges.html">Challenges</a></li>
      <li><a class="nav-link" href="ai-battle.html">AI Battle</a></li>
      <li><a class="nav-link" href="leaderboard.html">Leaderboard</a></li>
      <li><a class="nav-link" id="loginLink" href="login.html">Login</a></li>
      <li><a class="nav-link" id="registerLink" href="register.html">Register</a></li>
    </ul>
    <div class="user-menu" id="userMenu">
      <div class="user-profile-container">
        <div class="user-avatar" id="userAvatar" title="Open Profile">U</div>
        <div class="elo-progress-container">
          <div class="elo-rank-header">
            <div class="elo-rank-icon rank-beginner" id="eloRankIcon"></div>
            <span class="elo-rank-text" id="eloRankText">Beginner</span>
          </div>
          <div class="elo-progress-bar">
            <div class="elo-progress-fill rank-beginner" id="eloProgressFill" style="width:60%"></div>
          </div>
          <div class="elo-current-rating" id="eloCurrentRating">1200 ELO</div>
        </div>
      </div>
    </div>
  </nav>
</header>

<main class="main-container">
  <a class="back-button" href="courses.html">← Back to Courses</a>

  <section class="lesson-header">
    <h1 class="lesson-title">🎨 CSS Styling & Layout</h1>
    <p class="lesson-subtitle">Selectors, cascade & specificity, colors & typography, box model, positioning, Flexbox & Grid, responsive, motion, variables, modern functions.</p>

    <div class="view-switch" role="tablist" aria-label="Learning mode">
      <button id="tabInteractiveCSS" class="view-tab active" role="tab" aria-selected="true" onclick="switchView_CSS('interactive')">Interactive Lessons</button>
      <button id="tabBookCSS" class="view-tab" role="tab" aria-selected="false" onclick="switchView_CSS('book')">📘 Learn from Book</button>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progressFillCSS"></div></div>
  </section>

  <!-- INTERACTIVE -->
  <section id="lessonInteractiveCSS" class="lesson-content" aria-live="polite">

    <!-- 1 -->
    <div class="topic-card" data-topic="1">
      <h2 class="topic-title"><span class="topic-number">1</span> Selectors (Basics)</h2>
      <p class="topic-description">Tag, class <code>.class</code>, id <code>#id</code>, attribute <code>[attr]</code>, descendant and child combinators.</p>
      <div class="code-example"><code>h1 { color: orange; } .title { font-weight: 700; } #banner { background:#111; } nav a:hover{ text-decoration:underline; }</code></div>
      <div class="interactive-demo">
        <p class="title" id="demo-css-1">Selectors target the right elements without extra classes.</p>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(1)">Got it! ✨</button>
    </div>

    <!-- 2 -->
    <div class="topic-card" data-topic="2">
      <h2 class="topic-title"><span class="topic-number">2</span> Cascade, Inheritance & Specificity</h2>
      <p class="topic-description">Understand rule order, inheritance, and specificity weight (<code>id</code> &gt; <code>class</code> &gt; tag). Avoid <code>!important</code> except for utilities.</p>
      <div class="code-example"><code>/* Specificity examples */ 
p { color:#ddd; } 
.article p { color:#eee; } 
#main .article p { color:#fff; } /* highest */</code></div>
      <div class="interactive-demo">
        <p style="margin:0">Later + more specific rules win.</p>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(2)">Understood! 🧮</button>
    </div>

    <!-- 3 -->
    <div class="topic-card" data-topic="3">
      <h2 class="topic-title"><span class="topic-number">3</span> Colors & Typography</h2>
      <p class="topic-description">Hex/RGB/HSL; control <code>font-size</code>, <code>line-height</code>, <code>font-weight</code>, and spacing.</p>
      <div class="code-example"><code>p{ color:hsl(30 100% 50%); font-size:1.1rem; line-height:1.7; letter-spacing:.2px; }</code></div>
      <div class="interactive-demo">
        <p style="color:hsl(30 100% 50%);margin:0">Warm orange paragraph with comfy line height.</p>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(3)">Typo basics ✔️</button>
    </div>

    <!-- 4 -->
    <div class="topic-card" data-topic="4">
      <h2 class="topic-title"><span class="topic-number">4</span> Units & Sizing</h2>
      <p class="topic-description">Absolute (px) vs relative (em/rem), viewport (vw/vh), and container queries’ <code>cqw/cqh</code> (progressive enhancement).</p>
      <div class="code-example"><code>h1{ font-size:clamp(1.8rem, 3vw, 3rem); } .card{ width:min(90vw, 700px); }</code></div>
      <div class="interactive-demo">
        <p>Use <code>clamp()</code> for fluid but bounded sizes.</p>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(4)">Sizing locked 📏</button>
    </div>

    <!-- 5 -->
    <div class="topic-card" data-topic="5">
      <h2 class="topic-title"><span class="topic-number">5</span> The Box Model</h2>
      <p class="topic-description">Content → padding → border → margin. Prefer <code>* { box-sizing:border-box }</code> for predictable sizing.</p>
      <div class="code-example"><code>.box{ padding:12px; border:2px solid #ff8c00; margin:10px; box-sizing:border-box; }</code></div>
      <div class="interactive-demo">
        <div style="padding:12px;border:2px solid #ff8c00;margin:6px;max-width:300px">Box example</div>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(5)">Box model 👍</button>
    </div>

    <!-- 6 -->
    <div class="topic-card" data-topic="6">
      <h2 class="topic-title"><span class="topic-number">6</span> Display & Flow</h2>
      <p class="topic-description"><code>block</code>, <code>inline</code>, <code>inline-block</code>, <code>none</code>, and flow impacts spacing and layout.</p>
      <div class="code-example"><code>.inline{ display:inline } .block{ display:block } .hidden{ display:none }</code></div>
      <div class="interactive-demo">
        <span class="inline" style="background:#111;border:1px solid #333;padding:.2rem .4rem">inline</span>
        <span class="inline" style="background:#111;border:1px solid #333;padding:.2rem .4rem">sits inline</span>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(6)">Flow understood 🌊</button>
    </div>

    <!-- 7 -->
    <div class="topic-card" data-topic="7">
      <h2 class="topic-title"><span class="topic-number">7</span> Positioning & Stacking</h2>
      <p class="topic-description"><code>static</code>, <code>relative</code>, <code>absolute</code>, <code>fixed</code>, <code>sticky</code>, and <code>z-index</code>.</p>
      <div class="code-example"><code>.badge{ position:absolute; top:.4rem; right:.6rem } header{ position:sticky; top:0 }</code></div>
      <div class="interactive-demo">
        <p>Use positioning sparingly; prefer layout systems first.</p>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(7)">Positioning ✅</button>
    </div>

    <!-- 8 -->
    <div class="topic-card" data-topic="8">
      <h2 class="topic-title"><span class="topic-number">8</span> Pseudo-classes & Pseudo-elements</h2>
      <p class="topic-description">Stateful selectors like <code>:hover</code>, <code>:focus</code>, <code>:disabled</code> and content hooks <code>::before</code>/<code>::after</code>.</p>
      <div class="code-example"><code>a:hover{ text-decoration:underline } .btn:focus-visible{ outline:2px solid #ff8c00 } .tag::before{ content:"#"; color:#ff8c00 }</code></div>
      <div class="interactive-demo">
        <a href="#" style="color:#ffb347">Hover me</a>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(8)">Pseudo power ✨</button>
    </div>

    <!-- 9 -->
    <div class="topic-card" data-topic="9">
      <h2 class="topic-title"><span class="topic-number">9</span> Backgrounds, Borders, Shadows</h2>
      <p class="topic-description">Multiple backgrounds, gradients, rounded corners, and soft elevation.</p>
      <div class="code-example"><code>.panel{
  background:
    radial-gradient(80% 60% at 30% 20%, rgba(255,140,0,.15), transparent),
    #111;
  border-radius:14px;
  border:1px solid rgba(255,140,0,.2);
  box-shadow:0 8px 24px rgba(0,0,0,.35);
}</code></div>
      <div class="interactive-demo">
        <div style="background:radial-gradient(80% 60% at 30% 20%, rgba(255,140,0,.15), transparent), #111;border:1px solid rgba(255,140,0,.2);border-radius:14px;padding:1rem">
          Fancy panel
        </div>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(9)">Visual polish 🪄</button>
    </div>

    <!-- 10 -->
    <div class="topic-card" data-topic="10">
      <h2 class="topic-title"><span class="topic-number">10</span> Flexbox (Deep Dive)</h2>
      <p class="topic-description">Axis, wrapping, alignment, ordering, and common patterns like navbars and equal-height cards.</p>
      <div class="code-example"><code>.row{ display:flex; gap:10px; justify-content:space-between; align-items:center; flex-wrap:wrap }</code></div>
      <div class="interactive-demo">
        <div style="display:flex;gap:10px;justify-content:space-between">
          <div style="background:#111;padding:.5rem 1rem;border:1px solid #333">A</div>
          <div style="background:#111;padding:.5rem 1rem;border:1px solid #333">B</div>
          <div style="background:#111;padding:.5rem 1rem;border:1px solid #333">C</div>
        </div>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(10)">Flex fluent 🧭</button>
    </div>

    <!-- 11 -->
    <div class="topic-card" data-topic="11">
      <h2 class="topic-title"><span class="topic-number">11</span> CSS Grid (Deep Dive)</h2>
      <p class="topic-description">Explicit/implicit tracks, gaps, auto-fit/auto-fill, named areas.</p>
      <div class="code-example"><code>.grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px; grid-template-areas:
"hero hero"
"side main"; }
.hero{ grid-area:hero } .side{ grid-area:side } .main{ grid-area:main }</code></div>
      <div class="interactive-demo">
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
          <div style="background:#111;padding:1rem;border:1px solid #333">1</div>
          <div style="background:#111;padding:1rem;border:1px solid #333">2</div>
          <div style="background:#111;padding:1rem;border:1px solid #333">3</div>
        </div>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(11)">Grid pro 🧩</button>
    </div>

    <!-- 12 -->
    <div class="topic-card" data-topic="12">
      <h2 class="topic-title"><span class="topic-number">12</span> Responsive Design & Media Queries</h2>
      <p class="topic-description">Mobile-first queries; prefer fluid sizes, then enhance with breakpoints.</p>
      <div class="code-example"><code>.container{ width:min(90vw,1100px) }
@media (min-width: 768px){ .cards{ grid-template-columns:repeat(2,1fr) } }
@media (min-width: 1024px){ .cards{ grid-template-columns:repeat(3,1fr) } }</code></div>
      <div class="interactive-demo">
        <p>Design fluidly, then tweak at meaningful breakpoints.</p>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(12)">Responsive ready 📱</button>
    </div>

    <!-- 13 -->
    <div class="topic-card" data-topic="13">
      <h2 class="topic-title"><span class="topic-number">13</span> Transforms & Transitions</h2>
      <p class="topic-description">Use <code>transform</code> for GPU-friendly motion and <code>transition</code> to animate state changes.</p>
      <div class="code-example"><code>.btn{ transform:translateZ(0); transition:transform .2s ease, box-shadow .2s ease }
.btn:hover{ transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,0,0,.35) }</code></div>
      <div class="interactive-demo">
        <button class="try-it-button" style="margin:0">Hover me</button>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(13)">Smooth moves 🎛️</button>
    </div>

    <!-- 14 -->
    <div class="topic-card" data-topic="14">
      <h2 class="topic-title"><span class="topic-number">14</span> Animations & Keyframes</h2>
      <p class="topic-description">Create reusable motion with <code>@keyframes</code>. Keep durations short; respect prefers-reduced-motion.</p>
      <div class="code-example"><code>@keyframes pulse{ 0%{ transform:scale(1) } 50%{ transform:scale(1.03) } 100%{ transform:scale(1) } }
.card{ animation:pulse 2s ease-in-out infinite }</code></div>
      <div class="interactive-demo">
        <div style="display:inline-block;padding:.5rem 1rem;border:1px solid #333;animation:pulse 2s ease-in-out infinite">Pulsing</div>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(14)">Animation aware 🌀</button>
    </div>

    <!-- 15 -->
    <div class="topic-card" data-topic="15">
      <h2 class="topic-title"><span class="topic-number">15</span> CSS Variables & Modern Functions</h2>
      <p class="topic-description">Theme with custom properties and use <code>calc</code>, <code>min</code>, <code>max</code>, <code>clamp</code> for smart sizing.</p>
      <div class="code-example"><code>:root{ --brand:#ff8c00; --radius:14px }
.card{ border-radius:var(--radius); border:1px solid color-mix(in oklab, var(--brand), #000 70%); padding:clamp(.75rem, 2vw, 1.25rem) }
.card:hover{ box-shadow:0 10px 24px rgba(0,0,0,.35) }</code></div>
      <div class="interactive-demo">
        <div style="--brand:#ff8c00;--radius:14px;border-radius:var(--radius);border:1px solid rgba(255,140,0,.35);padding:clamp(.75rem,2vw,1.25rem)">Themed card with variables</div>
      </div>
      <button class="try-it-button" onclick="completeTopicCSS(15)">Variables FTW 🧪</button>
    </div>

    <!-- Quiz (shown after last topic) -->
    <div class="quiz-section" id="finalQuizCSS" style="display:none">
      <h2>🧠 CSS Knowledge Check</h2>
      <div class="quiz-question">Which layout system is best for 2-D layouts?</div>
      <div class="quiz-options" id="quizOptionsCSS">
        <div class="quiz-option" onclick="selectQuizOptionCSS(this,false)">A) Flexbox</div>
        <div class="quiz-option" onclick="selectQuizOptionCSS(this,true)">B) CSS Grid</div>
        <div class="quiz-option" onclick="selectQuizOptionCSS(this,false)">C) Floats</div>
        <div class="quiz-option" onclick="selectQuizOptionCSS(this,false)">D) Position absolute</div>
      </div>
      <button id="submitQuizCSS" class="submit-quiz" onclick="submitQuizCSS()" disabled>Submit Answer</button>
      <div id="quizFeedbackCSS" class="quiz-feedback"></div>
      <div class="next-lesson" id="nextLessonCSS" style="display:none">
        <a class="next-button" href="learn-javascript.html">Next: JavaScript ⚡</a>
      </div>
    </div>
  </section>

  <!-- BOOK -->
  <section id="bookModeCSS" aria-live="polite">
    <div class="book-wrap">
      <div class="book-actions">
        <a class="book-link" href="Books/CSS.pdf" target="_blank" rel="noopener">Open in new tab</a>
        <a class="book-link" href="Books/CSS.pdf" download>Download PDF</a>
      </div>
      <iframe class="book-iframe" src="Books/CSS.pdf"></iframe>
      <p style="margin-top:.6rem;color:#ccc;">If the PDF doesn’t display, use the buttons above.</p>
    </div>
  </section>
</main>

<script>
  /* ===== Header sync (same pattern as other pages) ===== */
  const ELO_RANKS = [
    { name:'Beginner',     class:'rank-beginner',     min:0,    max:1399 },
    { name:'Intermediate', class:'rank-intermediate', min:1400, max:1799 },
    { name:'Advanced',     class:'rank-advanced',     min:1800, max:2199 },
    { name:'Expert',       class:'rank-expert',       min:2200, max:9999 }
  ];
  let currentUser=null,currentELO=1250;
  function getRankFor(elo){ for(const r of ELO_RANKS){ if(elo>=r.min && elo<=r.max) return r; } return ELO_RANKS[0]; }
  function rankPct(elo,r){ const span=Math.max(1,r.max-r.min); return Math.max(0,Math.min(100,((elo-r.min)/span)*100)); }
  function loadUser(){
    try{
      const raw=localStorage.getItem('loggedInUser');
      currentUser = raw ? JSON.parse(raw) : null;
      currentELO = currentUser ? (currentUser.elo || 1250) : 1250;
    }catch(e){ currentUser=null; currentELO=1250; }
  }
  function updateHeaderUI(){
    const login=document.getElementById('loginLink');
    const reg=document.getElementById('registerLink');
    const menu=document.getElementById('userMenu');
    const av=document.getElementById('userAvatar');
    const icon=document.getElementById('eloRankIcon');
    const text=document.getElementById('eloRankText');
    const fill=document.getElementById('eloProgressFill');
    const rating=document.getElementById('eloCurrentRating');
    if(!login||!reg||!menu||!av||!icon||!text||!fill||!rating) return;
    if(currentUser){
      login.style.display='none'; reg.style.display='none'; menu.classList.add('show');
      av.innerHTML='';
      if(currentUser.avatarImage){
        const img=document.createElement('img'); img.src=currentUser.avatarImage; img.alt=(currentUser.name||currentUser.email||'Avatar'); av.appendChild(img);
      }else if(currentUser.avatar){ av.textContent=currentUser.avatar; }
      else{ av.textContent=((currentUser.name||currentUser.email||'U')[0]||'U').toUpperCase(); }
      av.onclick=()=>location.href='my-profile.html';
      const elo=(typeof currentUser.elo==='number')?currentUser.elo:1200;
      const r=getRankFor(elo), pct=rankPct(elo,r);
      icon.className='elo-rank-icon '+r.class; text.textContent=r.name;
      fill.className='elo-progress-fill '+r.class; fill.style.width=pct+'%';
      rating.textContent=elo+' ELO';
    }else{
      login.style.display='block'; reg.style.display='block'; menu.classList.remove('show');
    }
  }

  /* ===== View switch (interactive/book) ===== */
  const VIEW_KEY_CSS='lessonView_css';
  function switchView_CSS(mode){
    const inter=document.getElementById('lessonInteractiveCSS');
    const book=document.getElementById('bookModeCSS');
    const tI=document.getElementById('tabInteractiveCSS');
    const tB=document.getElementById('tabBookCSS');
    if(mode==='book'){
      inter.style.display='none'; book.style.display='block';
      tI.classList.remove('active'); tI.setAttribute('aria-selected','false');
      tB.classList.add('active'); tB.setAttribute('aria-selected','true');
    }else{
      inter.style.display='grid'; book.style.display='none';
      tB.classList.remove('active'); tB.setAttribute('aria-selected','false');
      tI.classList.add('active'); tI.setAttribute('aria-selected','true');
    }
    localStorage.setItem(VIEW_KEY_CSS,mode);
  }

  /* ===== Lesson progress + quiz (expanded to 15 topics) ===== */
  const CSS_TOTAL = 15;
  let cssCompleted=0, selectedCSS=null, correctCSS=false;
  function updateProgressCSS(){
    document.getElementById('progressFillCSS').style.width=(cssCompleted/CSS_TOTAL*100)+'%';
  }
  function completeTopicCSS(step){
    if(step>cssCompleted){
      cssCompleted=step; updateProgressCSS();
      const next=document.querySelector(`.topic-card[data-topic="${step+1}"]`);
      if(next){ setTimeout(()=>{ next.classList.add('visible'); next.scrollIntoView({behavior:'smooth',block:'center'}); },350); }
      if(step===CSS_TOTAL){
        setTimeout(()=>{
          document.getElementById('finalQuizCSS').style.display='block';
          document.getElementById('finalQuizCSS').scrollIntoView({behavior:'smooth'});
        },400);
      }
    }
  }
  function selectQuizOptionCSS(el, ok){
    document.querySelectorAll('#quizOptionsCSS .quiz-option').forEach(o=>o.classList.remove('selected'));
    el.classList.add('selected'); selectedCSS=el; correctCSS=ok;
    document.getElementById('submitQuizCSS').disabled=false;
  }
  function submitQuizCSS(){
    if(!selectedCSS) return;
    const opts=[...document.querySelectorAll('#quizOptionsCSS .quiz-option')];
    opts[1].classList.add('correct');
    if(!correctCSS){ selectedCSS.classList.add('incorrect'); }
    const fb=document.getElementById('quizFeedbackCSS');
    if(correctCSS){
      fb.textContent='✅ Correct!';
      fb.style.color='#4CAF50'; fb.style.background='rgba(76,175,80,.12)'; fb.style.border='1px solid #4CAF50';
    }else{
      fb.textContent='❌ Not quite. The correct answer is CSS Grid.';
      fb.style.color='#f44336'; fb.style.background='rgba(244,67,54,.12)'; fb.style.border='1px solid #f44336';
    }
    document.getElementById('submitQuizCSS').disabled=true;
    setTimeout(()=>{ document.getElementById('nextLessonCSS').style.display='block'; },800);
  }

  /* ===== Init + live updates ===== */
  document.addEventListener('DOMContentLoaded', ()=>{
    loadUser(); updateHeaderUI();
    document.querySelector('.topic-card[data-topic="1"]').classList.add('visible');
    switchView_CSS(localStorage.getItem(VIEW_KEY_CSS)||'interactive');
    document.body.style.opacity='0'; document.body.style.transition='opacity .5s ease';
    setTimeout(()=>{ document.body.style.opacity='1'; },60);
  });
  window.addEventListener('storage',e=>{ if(e.key==='loggedInUser'){ loadUser(); updateHeaderUI(); }});
  window.addEventListener('avatarUpdated', ()=>{ loadUser(); updateHeaderUI(); });
  window.addEventListener('eloUpdated',    ()=>{ loadUser(); updateHeaderUI(); });
  window.addEventListener('userUpdated',   ()=>{ loadUser(); updateHeaderUI(); });
</script>
</body>
</html>
